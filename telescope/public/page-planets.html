<link rel="import" href="/vendor/polymer/polymer.html">
<link rel="import" href="/list-item-planet.html">
<dom-module id="cosmos-page-planets">
<style>
.container {
  width: 100%;
  margin: 0 auto;
  padding: 0;
}

@media (min-width: 1080px) {
  .container {
    width: 1080px;
    marign: 0 auto;
  }
}

@media (min-width: 1400px) {
  .container {
    width: 1400px;
    margin: 0 auto;
  }
}

.left-container {
  width: 100%;
  margin: 0;
  padding: 0;
}

@media (min-width: 1080px) {
  .left-container {
    width: 260px;
    padding: 0 10px;
  }
}

@media (min-width: 1400px) {
  .left-container {
    width: 320px;
    padding: 0 10px;
  }
}

.planet-list {
  margin: 0;
  padding: 20px 20px;
}

.main-container {
  width: 100%;
  margin: 0;
  padding: 0;
  background-color: #fff;
}

@media (min-width: 1080px) {
  .main-container {
    width: 1080px;
  }
}

@media (min-width: 1400px) {
  .main-container {
    width: 1400px;
  }
}
.search {
  padding: 20px;
  background-color: #fff;
  border-bottom: 1px solid #e7e7ec;
  font-size: 16px;
}

.search input {
  width: 100%;
  background-color: #fff;
  outline: none;
  border: none;
  color: #333;
}

.graph-list {
  margin: 0;
  padding: 0;
}
</style>
<template>
  <div class="container">

    <div id="main" class="main-container col-md-8 col-xs-12">

      <div class="search">
        <input id="search-input" type="text" placeholder="Search all planets" />
      </div>

      <div class="planet-list">
        <template id="planetListTemplate" is="dom-repeat" items="{{planets}}">
          <cosmos-planet-list-item planet="{{item}}"></cosmos-planet-list-item>
        </template>
      </div>

    </div>

  </div>
</template>
</dom-module>
<script>
Polymer({
  is: 'cosmos-page-planets',
  properties: {
    planets: {
      type: Array,
      value: []
    },
    containers: {
      type: Array,
      value: []
    }
  },
  ready: function() {
    this.getPlanets();
  },
  attached: function() {

  },
  detached: function() {

  },
  onPlanetClicked: function(target) {
    history.pushState({
      page: 'planet'
    }, 'planet', '/planets/' + target.planet);
  },
  getPlanets: function() {
    this.$.main.hidden = true;
    NProgress.start();

    var self = this;
    Cosmos.getPlanets(function(response) {
      self.planets = response.data;
      if (!self.planets || self.planets.length == 0) {

      }
      self.$.main.hidden = false;
      NProgress.done();
    }, function(jqXHR) {

      self.$.main.hidden = false;
      NProgress.done();
    });
  },
  getContainers: function(planet) {
    var self = this;
    Cosmos.getContainers(planet, function(response){
      self.containers = response.data;
    },function(jqXHR){

    });
  }
});
</script>
