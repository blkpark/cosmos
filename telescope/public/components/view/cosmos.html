<link rel="import" href="/vendor/polymer/polymer.html">
<polymer-element name="page-cosmos" attributes="containers planets">
    <template>
        <style>
        :host label {
            float: right;
        }
        
        :host .card a {
            display: block;
            margin-right: 100px;
        }
        
        :host h4 {
            border-bottom: 1px solid #373737;
            padding-bottom: 8px;
        }
        </style>
        <div class="bootstrap cosmos">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-6 col-xs-12">
                        <div class="card">
                            <h4>Planets</h4>
                            <ul class="list-unstyled">
                                <template repeat="{{ planet in planets }}">
                                    <li>
                                        <a href="#" id="{{ planet['Name'] }}" on-click="{{ onPlanetNameClick }}">
                                            <p>{{ planet['Name'] }}</p>
                                        </a>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-6 col-xs-12">
                        <div class="card">
                            <h4>Containers</h4>
                            <ul class="list-unstyled">
                                <template repeat="{{ key in keys(containers) }}">
                                    <li>
                                        <label>{{ containers[key]['Status'][3] }}</label>
                                        <a href="#" id="{{ key }}" on-click="{{ onContainerNameClick }}">
                                            <p>{{ containerName(containers[key]['Names.0'][3]) }}</p>
                                        </a>
                                    </li>
                                </template>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </template>
    <script>
    Polymer('page-cosmos', {
        created: function() {
            this.containers = []; // type hint
        },
        ready: function() {

        },
        keys: function(obj) {
            return Object.keys(obj);
        },
        containerName: function(str) {
            var comps = str.split('/');
            return comps[comps.length - 1];
        },
        onPlanetNameClick: function(event, detail, sender) {
            var pagePlanet = document.querySelector('page-planet');
            pagePlanet.showKey = sender.id

            // Move to Planet Tab
            window.CosmosTabs.selected = 1;
        },
        onContainerNameClick: function(event, detail, sender) {
            var pageContainer = document.querySelector('page-container');
            pageContainer.showKey = sender.id

            // Move to Container Tab
            window.CosmosTabs.selected = 2;
        }
    });
    </script>
</polymer-element>
